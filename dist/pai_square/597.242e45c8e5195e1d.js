"use strict";(self.webpackChunkpai_square=self.webpackChunkpai_square||[]).push([[597],{8597:(z,h,l)=>{l.r(h),l.d(h,{UserModule:()=>J});var c=l(177),a=l(5776),f=l(2878),m=l(1468),e=l(4438),u=l(4677),_=l(1626),g=l(5779),v=l(1141),C=l(491),k=l(4827),b=l(1776);const x=()=>({width:"220px"});function U(i,r){if(1&i){const t=e.RV6();e.j41(0,"div",1)(1,"a",2),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.fetchAdvertisementsOnClick("Following"))}),e.nrm(2,"p-chip",10),e.k0s(),e.j41(3,"a",2),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.fetchProfileOnClick("Following"))}),e.nrm(4,"p-chip",11),e.k0s()()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("styleClass","FollowingAdvertisement"===t.followingactiveButton?"active-chip":"inactive-chip"),e.R7$(2),e.Y8G("styleClass","FollowingProfiles"===t.followingactiveButton?"active-chip":"inactive-chip")}}function I(i,r){if(1&i){const t=e.RV6();e.j41(0,"div",1)(1,"a",2),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.fetchAdvertisementsOnClick("Blocked"))}),e.nrm(2,"p-chip",12),e.k0s(),e.j41(3,"a",2),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.fetchProfileOnClick("Blocked"))}),e.nrm(4,"p-chip",11),e.k0s()()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("styleClass","BlockedAdvertisements"===t.blockedactiveButton?"active-chip":"inactive-chip"),e.R7$(2),e.Y8G("styleClass","BlockedProfiles"===t.blockedactiveButton?"active-chip":"inactive-chip")}}function F(i,r){if(1&i&&(e.j41(0,"div",19),e.nrm(1,"img",20),e.k0s()),2&i){const t=e.XpG(2).$implicit;e.R7$(),e.Y8G("src","data:image/png;base64,"+t.profileImage,e.B4B)}}function w(i,r){1&i&&(e.j41(0,"div",21),e.EFF(1," \xa3 "),e.k0s())}function j(i,r){if(1&i&&(e.j41(0,"div")(1,"div",16),e.DNE(2,F,2,1,"div",17)(3,w,2,0,"ng-template",null,0,e.C5r),e.k0s(),e.j41(5,"div",16)(6,"label",18),e.EFF(7),e.k0s()()()),2&i){const t=e.sdS(4),s=e.XpG().$implicit;e.R7$(2),e.Y8G("ngIf",s.profileImage)("ngIfElse",t),e.R7$(5),e.JRh(s.brandName)}}function B(i,r){if(1&i){const t=e.RV6();e.j41(0,"p-button",26),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2).$implicit,n=e.XpG(2);return e.Njj(n.follower(o.id))}),e.k0s()}2&i&&e.Y8G("text",!0)("outlined",!0)("raised",!0)}function y(i,r){if(1&i){const t=e.RV6();e.j41(0,"p-button",27),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2).$implicit,n=e.XpG(2);return e.Njj(n.block(o.id))}),e.k0s()}2&i&&e.Y8G("text",!0)("outlined",!0)("raised",!0)}function R(i,r){if(1&i){const t=e.RV6();e.j41(0,"div",22)(1,"p-button",23),e.bIt("onClick",function(){e.eBV(t);const o=e.XpG().$implicit,n=e.XpG(2);return e.Njj(n.visitProfile(o.id))}),e.k0s(),e.DNE(2,B,1,3,"p-button",24)(3,y,1,3,"p-button",25),e.k0s()}if(2&i){const t=e.XpG(3);e.R7$(),e.Y8G("outlined",!0)("text",!0)("raised",!0),e.R7$(),e.vxM(t.followingProfileView?2:3)}}function T(i,r){1&i&&(e.j41(0,"div",13)(1,"p-card"),e.DNE(2,j,8,3,"ng-template",14)(3,R,4,4,"ng-template",15),e.k0s()()),2&i&&(e.R7$(),e.Aen(e.lJ4(2,x)))}function G(i,r){if(1&i&&(e.j41(0,"div",8),e.Z7z(1,T,4,3,"div",13,e.Vm6),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Dyx(t.profileList)}}function $(i,r){1&i&&e.nrm(0,"app-homepage",9),2&i&&e.Y8G("ad",r.$implicit)}function A(i,r){if(1&i&&e.DNE(0,$,1,1,"app-homepage",28),2&i){const t=e.XpG();e.Y8G("ngForOf",t.advertisementsOnClick)}}let O=(()=>{class i{constructor(t,s,o,n){this._service=t,this.http=s,this._router=o,this._route=n,this.userId="",this.advertisement=!1,this.profile=!1,this.activeButton="Liked",this.followingactiveButton="FollowingAdvertisement",this.blockedactiveButton="BlockedAdvertisements",this.followingProfileView=!1,this.followerobj=new m.fO,this.blockobj=new m.eB}ngOnInit(){this.userId=this._service.userId,this.likedAdvertisements(),this._service.getUserFollowingProfiles(+this.userId).subscribe(t=>{},t=>{console.log("error occure while retrieving the data!")})}fetchAdvertisementsOnClick(t){this.advertisement=!0,this.profile=!1,this.followingactiveButton="FollowingAdvertisement",this.blockedactiveButton="BlockedAdvertisements","Liked"==t?(this.activeButton="Liked",this.likedAdvertisements()):"Favourites"==t?(this.activeButton="Favourites",this.favouriteAdvertisements()):"Following"==t?(this.activeButton="Following",this.followingAdvertisements()):"Visited"==t?(this.activeButton="Visited",this.visitedAdvertisements()):"Blocked"==t?(this.activeButton="Blocked",this.blockedAdvertisements()):this.advertisementsOnClick=[]}favouriteAdvertisements(){this._service.getFavouriteAdvertisements().subscribe(t=>{this.advertisementsOnClick=t},t=>{console.log("error occure while retrieving the data!")})}likedAdvertisements(){this._service.getLikedAdvertisements().subscribe(t=>{this.advertisementsOnClick=t},t=>{console.log("error occure while retrieving the data!")})}followingAdvertisements(){this._service.getFollowingAdvertisements().subscribe(t=>{this.advertisementsOnClick=t},t=>{console.log("error occure while retrieving the data!")})}visitedAdvertisements(){this._service.getVisitedAdvertisements().subscribe(t=>{this.advertisementsOnClick=t},t=>{console.log("error occure while retrieving the data!")})}blockedAdvertisements(){this._service.getBlockedAdvertisements().subscribe(t=>{this.advertisementsOnClick=t},t=>{console.log("error occure while retrieving the data!")})}fetchProfileOnClick(t){this.advertisement=!1,this.profile=!0,this.followingactiveButton="FollowingProfiles",this.blockedactiveButton="BlockedProfiles","Blocked"==t?(this.activeButton="Blocked",this.followingProfileView=!1,this.Blockedprofile()):"Following"==t&&(this.activeButton="Following",this.followingProfileView=!0,this.followingprofile())}Blockedprofile(){this._service.getUserBlockedProfiles(+this.userId).subscribe(t=>{this.profileList=t},t=>{console.log("error occure while retrieving the data!")})}followingprofile(){this._service.getUserFollowingProfiles(+this.userId).subscribe(t=>{this.profileList=t,console.log(this.profileList)},t=>{console.log("error occure while retrieving the data!")})}block(t){this.blockobj.userid=this._service.userId,this.blockobj.advertiserid=t,this.blockobj.Blocked=!0,this._service.postBlockAdvertiser(this.blockobj,this._service.userId,t).subscribe(s=>{this.Blockedprofile()},s=>{console.log("error occured while blocking advertiser")})}follower(t){this.followerobj.following=!0,this._service.FollowerFromRemote(this.followerobj,t,+this.userId).subscribe(s=>{this.followingprofile()},s=>{console.log("error occured for following")})}visitProfile(t){this._router.navigate(["general/profile",t])}static{this.\u0275fac=function(s){return new(s||i)(e.rXU(u.m),e.rXU(_.Qq),e.rXU(a.Ix),e.rXU(a.nX))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-useractivities"]],decls:19,vars:8,consts:[["placeholder",""],[1,"flex","gap-2"],[3,"click"],["label","Liked",3,"styleClass"],["label","Following",3,"styleClass"],["label","Favourites",3,"styleClass"],["label","Visited",3,"styleClass"],["label","Blocked",3,"styleClass"],[1,"grid",2,"padding-top","5px"],[3,"ad"],["label","Advertisement",3,"styleClass"],["label","Profiles",3,"styleClass"],["label","Advertisements",3,"styleClass"],[1,"lg:col-4","md:col-3","sm:col-2"],["pTemplate","body"],["pTemplate","footer",2,"margin","0px"],[1,"flex","justify-content-center","algin-content-center"],["class","logo-container",4,"ngIf","ngIfElse"],[2,"font-size","2rem"],[1,"logo-container"],["alt","Logo",1,"logo",2,"width","50px","height","50px",3,"src"],[1,"logo-placeholder"],[1,"flex","justify-content-around","gap-2"],["icon","pi pi-eye","label","Profile",3,"onClick","outlined","text","raised"],["icon","pi pi-user-plus","label","UnFollow",3,"text","outlined","raised"],["icon","pi pi-ban","label","Unblock",3,"text","outlined","raised"],["icon","pi pi-user-plus","label","UnFollow",3,"click","text","outlined","raised"],["icon","pi pi-ban","label","Unblock",3,"click","text","outlined","raised"],[3,"ad",4,"ngFor","ngForOf"]],template:function(s,o){1&s&&(e.j41(0,"div",1)(1,"a",2),e.bIt("click",function(){return o.fetchAdvertisementsOnClick("Liked")}),e.nrm(2,"p-chip",3),e.k0s(),e.j41(3,"a",2),e.bIt("click",function(){return o.fetchAdvertisementsOnClick("Following")}),e.nrm(4,"p-chip",4),e.k0s(),e.j41(5,"a",2),e.bIt("click",function(){return o.fetchAdvertisementsOnClick("Favourites")}),e.nrm(6,"p-chip",5),e.k0s(),e.j41(7,"a",2),e.bIt("click",function(){return o.fetchAdvertisementsOnClick("Visited")}),e.nrm(8,"p-chip",6),e.k0s(),e.j41(9,"a",2),e.bIt("click",function(){return o.fetchAdvertisementsOnClick("Blocked")}),e.nrm(10,"p-chip",7),e.k0s()(),e.j41(11,"div"),e.DNE(12,U,5,2,"div",1)(13,I,5,2,"div",1)(14,G,3,0,"div",8)(15,A,1,1,"app-homepage",9),e.k0s(),e.nrm(16,"br")(17,"br")(18,"br")),2&s&&(e.R7$(2),e.Y8G("styleClass","Liked"===o.activeButton?"active-chip":"inactive-chip"),e.R7$(2),e.Y8G("styleClass","Following"===o.activeButton?"active-chip":"inactive-chip"),e.R7$(2),e.Y8G("styleClass","Favourites"===o.activeButton?"active-chip":"inactive-chip"),e.R7$(2),e.Y8G("styleClass","Visited"===o.activeButton?"active-chip":"inactive-chip"),e.R7$(2),e.Y8G("styleClass","Blocked"===o.activeButton?"active-chip":"inactive-chip"),e.R7$(2),e.vxM("Following"==o.activeButton?12:-1),e.R7$(),e.vxM("Blocked"==o.activeButton?13:-1),e.R7$(),e.vxM(1==o.profile?14:15))},dependencies:[c.Sq,c.bT,g.Ei,v.$n,C.Z,k.v,b.o],styles:["[_nghost-%COMP%]     .p-card{position:relative}[_nghost-%COMP%]     .p-card .p-card-body{height:200px;padding:.5rem;display:flex;flex-direction:column;justify-content:space-between}[_nghost-%COMP%]     .p-card .p-footer{position:absolute;bottom:0;left:0;width:100%}[_nghost-%COMP%]     .p-button.p-button-text{padding:5px}"]})}}return i})(),X=(()=>{class i{static{this.\u0275fac=function(s){return new(s||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-userdashboard"]],decls:2,vars:0,template:function(s,o){1&s&&(e.j41(0,"p"),e.EFF(1,"userdashboard works!"),e.k0s())}})}}return i})();var d=l(4341),V=l(2242);function M(i,r){if(1&i){const t=e.RV6();e.j41(0,"li",6),e.bIt("click",function(){const o=e.eBV(t).$implicit,n=e.XpG();return e.Njj(n.selectUser(o))}),e.EFF(1),e.k0s()}if(2&i){const t=r.$implicit,s=e.XpG();e.AVh("surface-200",t.id===s.selectedUserId),e.R7$(),e.SpI(" ",t.username," ")}}function P(i,r){if(1&i&&(e.j41(0,"small",17),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.JRh(t.currentUserName)}}function N(i,r){if(1&i&&(e.j41(0,"small",17),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.JRh(t.selectedUserName)}}function E(i,r){if(1&i&&(e.j41(0,"div",14)(1,"div",15),e.DNE(2,P,2,1,"small",16)(3,N,2,1,"small",16),e.j41(4,"small",17),e.EFF(5),e.nI1(6,"date"),e.k0s()(),e.j41(7,"div",18)(8,"p",19),e.EFF(9),e.k0s()()()),2&i){const t=r.$implicit,s=e.XpG(2);e.R7$(),e.AVh("ml-auto",t.senderId===s.currentUserId)("mr-auto",t.senderId!==s.currentUserId)("text-right",t.senderId===s.currentUserId)("text-left",t.senderId!==s.currentUserId),e.R7$(),e.Y8G("ngIf",t.senderId===s.currentUserId),e.R7$(),e.Y8G("ngIf",t.senderId!==s.currentUserId),e.R7$(2),e.JRh(e.i5U(6,24,t.timestamp,"short")),e.R7$(2),e.AVh("ml-auto",t.senderId===s.currentUserId)("mr-auto",t.senderId!==s.currentUserId)("text-right",t.senderId===s.currentUserId)("text-left",t.senderId!==s.currentUserId)("bg-primary",t.senderId===s.currentUserId)("bg-secondary",t.senderId!==s.currentUserId),e.R7$(2),e.JRh(t.message)}}function Y(i,r){if(1&i){const t=e.RV6();e.j41(0,"div",7)(1,"label",8),e.EFF(2),e.k0s()(),e.j41(3,"div",9),e.DNE(4,E,10,27,"div",10),e.k0s(),e.j41(5,"div",11)(6,"input",12),e.mxI("ngModelChange",function(o){e.eBV(t);const n=e.XpG();return e.DH7(n.messageText,o)||(n.messageText=o),e.Njj(o)}),e.k0s(),e.j41(7,"button",13),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.sendMessage())}),e.k0s()()}if(2&i){const t=e.XpG();e.R7$(2),e.JRh(t.selectedUserName),e.R7$(2),e.Y8G("ngForOf",t.messages),e.R7$(2),e.R50("ngModel",t.messageText)}}const D=[{path:"",component:f._,children:[{path:"useractivities",component:O},{path:"chat",component:(()=>{class i{constructor(t,s,o,n){this._service=t,this.http=s,this._router=o,this._route=n,this.chatHistoryUsers=[],this.messages=[],this.currentUserId=this._service.userId,this.currentUserName=this._service.userName,this.userSelected=!1,this.messageText="",this.selectedUserName=""}ngOnInit(){this.getChatHistoryUsers(),this._route.queryParams.subscribe(t=>{const s=+t.userId,o=t.name;s&&o&&(this.chatHistoryUsers.some(p=>p.id===s)||this.chatHistoryUsers.push({id:s,username:o}),this._service.getMessages(this.currentUserId,s).subscribe(p=>{this.messages=p}))})}getChatHistoryUsers(){this._service.getChatHistoryUsers(this._service.userId).subscribe({next:t=>{this.chatHistoryUsers.push(...t)},error:t=>{console.error("Error occurred while retrieving chat history:",t)},complete:()=>{console.log("Chat history retrieval completed")}})}selectUser(t){this.selectedUserId=t.id,this._service.getMessages(this.currentUserId,this.selectedUserId).subscribe(s=>{this.messages=s,this.selectedUserName=t.username,this.chatHistoryUsers=[],this.getChatHistoryUsers()}),this.userSelected=!0}sendMessage(){this.messageText.trim()&&this.selectedUserId&&this._service.sendMessage({senderId:this.currentUserId,receiverId:this.selectedUserId,message:this.messageText}).subscribe(s=>{this.messages.push(s),this.messageText=""})}initializeChat(t){this._service.initializeChat({senderId:this.currentUserId,receiverId:t,message:""}).subscribe()}static{this.\u0275fac=function(s){return new(s||i)(e.rXU(u.m),e.rXU(_.Qq),e.rXU(a.Ix),e.rXU(a.nX))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-chat"]],decls:8,vars:2,consts:[[1,"grid","h-screen"],[1,"col-12","lg:col-3","border-right-1","surface-border","flex-shrink-0"],[1,"text-center","lg:text-left",2,"padding-left","3px"],[1,"list-none","p-0"],["class","p-3 cursor-pointer hover:surface-hover",3,"surface-200","click",4,"ngFor","ngForOf"],[1,"col-12","lg:col-9","flex","flex-column"],[1,"p-3","cursor-pointer","hover:surface-hover",3,"click"],[1,"p-3","shadow-2","surface-100","border-bottom-1","surface-border","flex","justify-content-between","align-items-center",2,"margin-left","-8px","margin-right","-8px"],[1,"text-center","lg:text-left","flex-grow-1"],[1,"flex-1","p-3","overflow-y-auto",2,"max-height","calc(100vh - 120px)"],["class","mb-3",4,"ngFor","ngForOf"],[1,"p-3","border-top-1","surface-border","flex","align-items-center",2,"position","sticky","bottom","0","background","white"],["type","text","pInputText","","placeholder","Type your message",1,"flex-1","mr-3",3,"ngModelChange","ngModel"],["pButton","","label","Send","icon","pi pi-send",1,"p-button-primary",3,"click"],[1,"mb-3"],[1,"flex","justify-between","p-2","border-round","text-black","max-w-75","sm:max-w-50","md:max-w-40","lg:max-w-30"],["class","text-xs",4,"ngIf"],[1,"text-xs"],[1,"p-2","border-round","text-white","max-w-75","sm:max-w-50","md:max-w-40","lg:max-w-30"],[1,"m-0"]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"h3",2),e.EFF(3,"Chat List"),e.k0s(),e.j41(4,"ul",3),e.DNE(5,M,2,3,"li",4),e.k0s()(),e.j41(6,"div",5),e.DNE(7,Y,8,3),e.k0s()()),2&s&&(e.R7$(5),e.Y8G("ngForOf",o.chatHistoryUsers),e.R7$(2),e.vxM(o.userSelected?7:-1))},dependencies:[c.Sq,c.bT,d.me,d.BC,V.S,d.vS,v._f,c.vh],styles:[".max-w-75[_ngcontent-%COMP%]{max-width:75%}.bg-primary[_ngcontent-%COMP%]{background-color:#007ad9}.bg-secondary[_ngcontent-%COMP%]{background-color:#6c757d}.text-right[_ngcontent-%COMP%]{text-align:right}.text-left[_ngcontent-%COMP%]{text-align:left}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}"]})}}return i})()},{path:"userdashboard",component:X}]}];let H=(()=>{class i{static{this.\u0275fac=function(s){return new(s||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[a.iI.forChild(D),a.iI]})}}return i})();var S=l(4629);let J=(()=>{class i{static{this.\u0275fac=function(s){return new(s||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[c.MD,H,S.r]})}}return i})()}}]);